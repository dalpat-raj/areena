"use strict";(self.webpackChunkfrontend=self.webpackChunkfrontend||[]).push([[3292],{3292:function(e,i,n){n.r(i),n.d(i,{default:function(){return _}});var s=n(4165),l=n(5861),r=n(9439),d=n(2791),o=n(9434),c=n(8014),t=n(7689),a=n(5759),u=n(1713),v=n(8617),h=n(1213),p=n(8820),x=n(9893),m=n(1243),j=function(e){var i=e.user,n=e.rating,r=e.comment,d=e.productId,o=e.orderId;return function(){var e=(0,l.Z)((0,s.Z)().mark((function e(l){var c,t;return(0,s.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,l({type:"createNewReviewRequest"}),e.next=4,m.Z.put("/api/v2/create-new-review",{user:i,rating:n,comment:r,productId:d,orderId:o},{withCredentials:!0});case 4:c=e.sent,t=c.data,l({type:"createNewReviewSuccess",payload:t}),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(0),l({type:"createNewReviewFail",payload:e.t0.response.data.message});case 12:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(i){return e.apply(this,arguments)}}()},f=n(854),N=n(1146),g=n(184),_=function(){var e,i,n,m,_,b,w,y,k,C,P=(0,o.v9)((function(e){return e.user})).user,Z=(0,o.v9)((function(e){return e.review})),S=Z.message,I=Z.success,D=Z.error,R=(0,o.v9)((function(e){return e.order})),A=R.order,T=R.isLoading,z=(0,d.useState)(),O=(0,r.Z)(z,2),F=O[0],q=O[1],L=(0,d.useState)(!1),E=(0,r.Z)(L,2),G=E[0],M=E[1],W=(0,d.useState)(1),B=(0,r.Z)(W,2),H=B[0],J=B[1],K=(0,d.useState)(""),Q=(0,r.Z)(K,2),U=Q[0],$=Q[1],V=(0,t.UO)().id,X=(0,t.s0)(),Y=(0,o.I0)(),ee=(0,d.useRef)(),ie=(0,N.useReactToPrint)({content:function(){return ee.current}}),ne=function(){var e=(0,l.Z)((0,s.Z)().mark((function e(){return(0,s.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:Y(j({user:P,rating:H,comment:U,productId:F._id,orderId:V})),!0===I&&(alert(S),window.location.reload());case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return(0,d.useEffect)((function(){Y((0,u.BJ)(V)),D&&Y({type:"clearErrors()"})}),[Y,V,D]),T?(0,g.jsx)(x.Z,{}):(0,g.jsx)("div",{className:"order_details",children:(0,g.jsxs)("div",{className:"container",children:[(0,g.jsxs)("div",{className:"row",children:["Delivered"===(null===A||void 0===A?void 0:A.status)?(0,g.jsxs)("div",{className:"heading heading_row",children:[(0,g.jsx)("span",{children:(0,g.jsx)(v.lyK,{})}),(0,g.jsx)("h4",{children:"Delivered"})]}):(0,g.jsxs)("div",{className:"heading",children:[(0,g.jsx)("span",{children:(0,g.jsx)(c.NLj,{})}),(0,g.jsx)("h4",{children:"Order Details"})]}),(0,g.jsx)("div",{className:"back-btn",children:(0,g.jsx)("button",{onClick:function(){return X(-1)},className:"btn-main",children:"All Orders"})})]}),(0,g.jsxs)("div",{className:"order_id",children:[(0,g.jsxs)("p",{children:["Order ID : ",(0,g.jsxs)("span",{children:[null===A||void 0===A||null===(e=A._id)||void 0===e?void 0:e.slice(0,9),"..."]})]}),(0,g.jsxs)("p",{children:["Placed on : ",(0,g.jsx)("span",{children:null===A||void 0===A||null===(i=A.createdAt)||void 0===i?void 0:i.slice(0,10)})]})]}),(0,g.jsx)("div",{className:"product_details",children:A&&(null===A||void 0===A||null===(n=A.cart)||void 0===n?void 0:n.map((function(e,i){var n;return(0,g.jsxs)("div",{className:"product_main",children:[(0,g.jsxs)("div",{className:"image__box",children:[(0,g.jsx)("img",{src:"".concat(a.M,"/").concat(null===e||void 0===e?void 0:e.images[0]),alt:"product details"}),(0,g.jsxs)("div",{className:"product_text",children:[(0,g.jsxs)("h5",{children:[null===e||void 0===e?void 0:e.name.slice(0,15),"..."]}),(0,g.jsxs)("h5",{children:["\u20b9 ",null===e||void 0===e?void 0:e.sellingPrice]}),(null===e||void 0===e?void 0:e.qty)&&(0,g.jsxs)("h5",{children:["Quantity: ",null===e||void 0===e?void 0:e.qty]}),(null===e||void 0===e?void 0:e.color)&&(0,g.jsxs)("h5",{children:["Color: ",null===e||void 0===e?void 0:e.color]}),(null===e||void 0===e?void 0:e.size)&&(0,g.jsxs)("h5",{children:["Size: ",null===e||void 0===e?void 0:e.size]})]})]}),(0,g.jsx)("div",{className:"payment_info",children:A&&"succeeded"===(null===A||void 0===A||null===(n=A.paymentInfo)||void 0===n?void 0:n.status)?(0,g.jsx)("img",{src:"/payment.png",alt:"payment"}):(0,g.jsxs)(g.Fragment,{children:[(0,g.jsx)("h5",{children:"Payment Info"}),(0,g.jsx)("p",{children:"Not Paid"})]})}),"Delivered"===(null===A||void 0===A?void 0:A.status)?!0===(null===e||void 0===e?void 0:e.isReviewed)?null:(0,g.jsx)("button",{onClick:function(){return M(!0)||q(e)},className:"btn-sec update_status",children:"Write a Review"}):(0,g.jsxs)("div",{className:"update_stauts",children:[(0,g.jsx)("h4",{children:"Order Status"}),(0,g.jsx)("p",{children:null===A||void 0===A?void 0:A.status})]})]},i)})))}),G&&(0,g.jsxs)(g.Fragment,{children:[(0,g.jsxs)("div",{className:"review_main",children:[(0,g.jsx)("span",{className:"popup_close",children:(0,g.jsx)(h.$iT,{onClick:function(){return M(!1)}})}),(0,g.jsx)("div",{className:"heading",children:(0,g.jsx)("h4",{children:"Give a Review"})}),(0,g.jsxs)("div",{className:"write_comment",children:[(0,g.jsxs)("label",{htmlFor:"comment",children:["Write a comment",(0,g.jsx)("span",{children:"(Optional)"})]}),(0,g.jsx)("textarea",{onChange:function(e){return $(e.target.value)},name:"comment",id:"comment",rows:"15",value:U,placeholder:"write your expresion about product"})]}),(0,g.jsx)("div",{className:"rating_start_main",children:[1,2,3,4,5].map((function(e){return H>=e?(0,g.jsx)(p.pHD,{className:"full_fill_icon",onClick:function(){return J(e)},color:"rgb(246,186,0)",size:25},e):(0,g.jsx)(p.y5j,{className:"full_fill_icon",onClick:function(){return J(e)},color:"rgb(246,186,0)",size:25},e)}))}),(0,g.jsx)("div",{className:"btn",children:(0,g.jsx)("button",{onClick:ne,className:"btn-main",children:"Submit"})})]}),(0,g.jsx)("p",{onClick:function(){return M(!1)},className:"overlay"})]}),(0,g.jsxs)("div",{className:"order__info",children:[(0,g.jsxs)("div",{className:"shipping__info",children:[(0,g.jsx)("h4",{children:"Shipping Address"}),(0,g.jsx)("p",{children:(null===A||void 0===A||null===(m=A.shippingAddress)||void 0===m?void 0:m.address1)+", "+(null===A||void 0===A||null===(_=A.shippingAddress)||void 0===_?void 0:_.address2)+", "+(null===A||void 0===A||null===(b=A.shippingAddress)||void 0===b?void 0:b.city)}),(0,g.jsxs)("p",{children:[(null===A||void 0===A||null===(w=A.shippingAddress)||void 0===w?void 0:w.state)+" ("+(null===A||void 0===A||null===(y=A.shippingAddress)||void 0===y?void 0:y.country),")"]}),(0,g.jsxs)("p",{children:["Zip Code. ",null===A||void 0===A||null===(k=A.shippingAddress)||void 0===k?void 0:k.zipCode]}),(0,g.jsxs)("p",{children:["+91 ",null===A||void 0===A||null===(C=A.user)||void 0===C?void 0:C.phoneNumber]})]}),(0,g.jsx)("div",{className:"price__box",children:(0,g.jsxs)("div",{className:"total_price",children:[(0,g.jsx)("h4",{children:"Payment Details"}),(null===A||void 0===A?void 0:A.shippingPrice)&&(0,g.jsxs)("p",{children:["Shipping : \u20b9 ",null===A||void 0===A?void 0:A.shippingPrice]}),(null===A||void 0===A?void 0:A.discountPrice)&&(0,g.jsxs)("p",{children:["Discount : \u20b9"," ",null!==(null===A||void 0===A?void 0:A.discountPrice)?null===A||void 0===A?void 0:A.discountPrice:0]}),(null===A||void 0===A?void 0:A.subTotalPrice)&&(0,g.jsxs)("p",{children:["SubTotal : \u20b9 ",null===A||void 0===A?void 0:A.subTotalPrice]}),(null===A||void 0===A?void 0:A.totalPrice)&&(0,g.jsxs)("p",{children:["Total Price : \u20b9 ",null===A||void 0===A?void 0:A.totalPrice]}),(0,g.jsx)("div",{className:"Component__to__print",children:(0,g.jsx)(f.Z,{ref:ee})}),(0,g.jsx)("button",{className:"btn-main",onClick:ie,children:"Download Invoice"})]})})]}),(0,g.jsxs)("div",{className:"row btn_row",children:[(0,g.jsx)("button",{className:"btn-main",children:"Send Message To Seller"}),"Delivered"===(null===A||void 0===A?void 0:A.status)&&(0,g.jsx)("button",{onClick:function(){return function(e){Y((0,u.Lp)(e))}(null===A||void 0===A?void 0:A._id)},className:"btn-sec",children:"Give a Refund"})]})]})})}}}]);
//# sourceMappingURL=3292.e2e913e9.chunk.js.map