"use strict";(self.webpackChunkfrontend=self.webpackChunkfrontend||[]).push([[4670],{4670:function(e,n,s){s.r(n),s.d(n,{default:function(){return V}});var a=s(9439),i=s(2791),r=s(7425),t=s(1545),c=s(3853),l=s(6053),d=s(9126),o=s(2804),u=s(7689),v=s(9434),x=s(8617),h=s(8820),m=s(184),j=function(e){var n=e.active,s=e.setActive,a=(0,v.v9)((function(e){return e.user})).user,i=(0,v.I0)(),j=(0,u.s0)();return(0,m.jsxs)("div",{className:"profileSidebar__main",children:[a&&"Admin"===(null===a||void 0===a?void 0:a.role)&&(0,m.jsx)("div",{className:9===n?"profileSidebar__row active":"profileSidebar__row",onClick:function(){return s(9)||j("/admin-dashboard")},children:(0,m.jsxs)("div",{className:"sidebar__header",children:[(0,m.jsx)("span",{children:(0,m.jsx)(l.OhZ,{})}),(0,m.jsx)("span",{children:"Admin Pennel"})]})}),(0,m.jsx)("div",{className:1===n?"profileSidebar__row active":"profileSidebar__row",onClick:function(){return s(1)},children:(0,m.jsxs)("div",{className:"sidebar__header",children:[(0,m.jsx)("span",{className:"icon",children:(0,m.jsx)(d.O5U,{})}),(0,m.jsx)("span",{className:"text",children:"Profile"})]})}),(0,m.jsx)("div",{className:2===n?"profileSidebar__row active":"profileSidebar__row",onClick:function(){return s(2)},children:(0,m.jsxs)("div",{className:"sidebar__header",children:[(0,m.jsx)("span",{children:(0,m.jsx)(d.a53,{})}),(0,m.jsx)("span",{children:"Orders"})]})}),(0,m.jsx)("div",{className:3===n?"profileSidebar__row active":"profileSidebar__row",onClick:function(){return s(3)},children:(0,m.jsxs)("div",{className:"sidebar__header",children:[(0,m.jsx)("span",{children:(0,m.jsx)(x.xkh,{})}),(0,m.jsx)("span",{children:"Refund"})]})}),(0,m.jsx)("div",{className:4===n?"profileSidebar__row active":"profileSidebar__row",onClick:function(){return s(4)},children:(0,m.jsxs)("div",{className:"sidebar__header",children:[(0,m.jsx)("span",{children:(0,m.jsx)(h.e$J,{})}),(0,m.jsx)("span",{children:"Inbox"})]})}),(0,m.jsx)("div",{className:5===n?"profileSidebar__row active":"profileSidebar__row",onClick:function(){return s(5)},children:(0,m.jsxs)("div",{className:"sidebar__header",children:[(0,m.jsx)("span",{children:(0,m.jsx)(c.MIl,{})}),(0,m.jsx)("span",{children:"Track Orders"})]})}),(0,m.jsx)("div",{className:6===n?"profileSidebar__row active":"profileSidebar__row",onClick:function(){return s(6)},children:(0,m.jsxs)("div",{className:"sidebar__header",children:[(0,m.jsx)("span",{children:(0,m.jsx)(r.z85,{})}),(0,m.jsx)("span",{children:"Password Change"})]})}),(0,m.jsx)("div",{className:7===n?"profileSidebar__row active":"profileSidebar__row",onClick:function(){return s(7)},children:(0,m.jsxs)("div",{className:"sidebar__header",children:[(0,m.jsx)("span",{children:(0,m.jsx)(t.D7k,{})}),(0,m.jsx)("span",{children:"Address"})]})}),(0,m.jsx)("div",{className:8===n?"profileSidebar__row active":"profileSidebar__row",onClick:function(){return s(8)||(i((0,o.Zw)()),void j("/"))},children:(0,m.jsxs)("div",{className:"sidebar__header",children:[(0,m.jsx)("span",{children:(0,m.jsx)(h.Mqe,{})}),(0,m.jsx)("span",{children:"Logout"})]})})]})},p=s(4165),f=s(5861),_=s(5759),g=s(1243),N=s(4270),b=s(9893),w=function(){var e=(0,v.v9)((function(e){return e.user})),n=e.user,s=e.loading,r=(0,i.useState)(null===n||void 0===n?void 0:n.avatar),t=(0,a.Z)(r,2),c=t[0],l=t[1],u=(0,i.useState)(null===n||void 0===n?void 0:n.name),x=(0,a.Z)(u,2),h=x[0],j=x[1],w=(0,i.useState)(null===n||void 0===n?void 0:n.email),Z=(0,a.Z)(w,2),S=Z[0],C=Z[1],k=(0,i.useState)(null===n||void 0===n?void 0:n.phoneNumber),y=(0,a.Z)(k,2),A=y[0],I=y[1],M=(0,i.useState)(null),F=(0,a.Z)(M,2),P=F[0],E=F[1],D=(0,v.I0)(),U=function(){var e=(0,f.Z)((0,p.Z)().mark((function e(n){var s,a;return(0,p.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s=n.target.files[0],l(s),(a=new FormData).append("image",n.target.files[0]),e.next=6,g.Z.put("/api/v2/update-user-avatar",a,{headers:{"Content-Type":"multipart/form-data"},withCredentials:!0}).then((function(e){window.location.reload()})).catch((function(e){}));case 6:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}();return(0,i.useEffect)((function(){D((0,o.II)())}),[D]),(0,m.jsx)(m.Fragment,{children:s?(0,m.jsx)(b.Z,{}):(0,m.jsxs)("div",{className:"account__main",children:[(0,m.jsxs)(N.q,{children:[(0,m.jsx)("meta",{charSet:"utf-8"}),(0,m.jsx)("title",{children:"Your Account"}),(0,m.jsx)("meta",{name:"description",content:"what is in your account:-  your account in your personal information like name phone emil etc."}),(0,m.jsx)("link",{rel:"canonical",href:"https://areenaa.in/account"})]}),(0,m.jsxs)("div",{className:"main__container",children:[(0,m.jsxs)("div",{className:"img__box",children:[(0,m.jsx)("img",{src:"".concat(_.M,"/").concat(n?null===n||void 0===n?void 0:n.avatar:c),alt:"raj"}),(0,m.jsxs)("div",{className:"image__input",children:[(0,m.jsx)("input",{id:"image",type:"file",onChange:U}),(0,m.jsx)("label",{htmlFor:"image",children:(0,m.jsx)(d.gD$,{})})]})]}),(0,m.jsxs)("form",{onSubmit:function(e){e.preventDefault();var n={name:h,email:S,phoneNumber:A,password:P};D((0,o.gS)(n))},children:[(0,m.jsxs)("div",{className:"main__input",children:[(0,m.jsxs)("div",{className:"input__box",children:[(0,m.jsx)("label",{htmlFor:"fullName",children:"Full Name"}),(0,m.jsx)("input",{type:"text",id:"fullName",value:h,onChange:function(e){return j(e.target.value)}})]}),(0,m.jsxs)("div",{className:"input__box",children:[(0,m.jsx)("label",{htmlFor:"email",children:"Email Address"}),(0,m.jsx)("input",{type:"text",id:"email",value:S,onChange:function(e){return C(e.target.value)}})]}),(0,m.jsxs)("div",{className:"input__box",children:[(0,m.jsx)("label",{htmlFor:"phoneNumbar",children:"Phone Number"}),(0,m.jsx)("input",{type:"text",id:"PhoneNumber",value:A,onChange:function(e){return I(e.target.value)}})]}),(0,m.jsxs)("div",{className:"input__box",children:[(0,m.jsx)("label",{htmlFor:"zipCode",children:"Your Password"}),(0,m.jsx)("input",{type:"password",id:"zipCode",value:P,onChange:function(e){return E(e.target.value)},placeholder:"Please Verify Your Current Password"})]})]}),(0,m.jsx)("div",{className:"submit__button",children:(0,m.jsx)("button",{className:"btn-main",children:"UPDATE PROFILE"})})]})]})]})})},Z=s(1087),S=s(1713),C=function(){var e=(0,v.v9)((function(e){return e.order})),n=e.orders,s=e.loading,a=(0,v.v9)((function(e){return e.user})).user,r=(0,v.I0)();return(0,i.useEffect)((function(){r((0,S.EU)(a._id))}),[r,a._id]),(0,m.jsx)(m.Fragment,{children:s?(0,m.jsx)(b.Z,{}):(0,m.jsx)("div",{className:"order__main",children:(0,m.jsx)("div",{className:"box",children:n&&n.map((function(e,n){return(0,m.jsx)(Z.rU,{to:"/user/order/".concat(null===e||void 0===e?void 0:e._id),children:(0,m.jsxs)("div",{className:"row",children:[(0,m.jsx)("div",{className:"img_name",children:null===e||void 0===e?void 0:e.cart.map((function(e,n){return(0,m.jsxs)("div",{className:"img_name_row",children:[(0,m.jsx)("img",{src:"".concat(_.M,"/").concat(null===e||void 0===e?void 0:e.images[0]),alt:"raj"}),(0,m.jsx)("p",{children:(null===e||void 0===e?void 0:e.name.length)>=25?"".concat(null===e||void 0===e?void 0:e.name.slice(0,25),"..."):null===e||void 0===e?void 0:e.name})]},n)}))}),(0,m.jsx)("div",{className:"price",children:(0,m.jsxs)("p",{children:["\u20b9 ",null===e||void 0===e?void 0:e.totalPrice]})}),(0,m.jsx)("div",{className:"status",children:(0,m.jsx)("p",{children:null===e||void 0===e?void 0:e.status})})]},n)})}))})})})},k=function(){var e=(0,v.v9)((function(e){return e.order})),n=e.orders,s=e.loading,a=(0,v.v9)((function(e){return e.user})).user,r=(0,v.I0)();(0,i.useEffect)((function(){r((0,S.EU)(a._id))}),[r,a._id]);var t=n&&n.filter((function(e){return"Processing Refund"===e.status}));return(0,m.jsx)(m.Fragment,{children:s?(0,m.jsx)(b.Z,{}):(0,m.jsx)("div",{className:"order__main",children:(0,m.jsx)("div",{className:"box",children:t&&t.map((function(e,n){return(0,m.jsx)(Z.rU,{to:"/user/order/".concat(null===e||void 0===e?void 0:e._id),children:(0,m.jsxs)("div",{className:"row",children:[(0,m.jsx)("div",{className:"img_name",children:null===e||void 0===e?void 0:e.cart.map((function(e,n){return(0,m.jsxs)("div",{className:"img_name_row",children:[(0,m.jsx)("img",{src:"".concat(_.M,"/").concat(null===e||void 0===e?void 0:e.images[0]),alt:"raj"}),(0,m.jsx)("p",{children:(null===e||void 0===e?void 0:e.name.length)>=25?"".concat(null===e||void 0===e?void 0:e.name.slice(0,25),"..."):null===e||void 0===e?void 0:e.name})]},n)}))}),(0,m.jsx)("div",{className:"price",children:(0,m.jsxs)("p",{children:["\u20b9 ",null===e||void 0===e?void 0:e.totalPrice]})}),(0,m.jsx)("div",{className:"status",children:(0,m.jsx)("p",{children:null===e||void 0===e?void 0:e.status})})]},n)})}))})})})},y=function(){var e=(0,v.v9)((function(e){return e.order})),n=e.orders,s=e.loading,a=(0,v.v9)((function(e){return e.user})).user,r=(0,v.I0)();return(0,i.useEffect)((function(){r((0,S.EU)(null===a||void 0===a?void 0:a._id))}),[r,a._id]),(0,m.jsx)(m.Fragment,{children:s?(0,m.jsx)(b.Z,{}):(0,m.jsx)("div",{className:"order__main",children:(0,m.jsx)("div",{className:"box",children:n&&n.map((function(e,n){var s;return(0,m.jsx)(Z.rU,{to:"/user/track-order/".concat(null===e||void 0===e?void 0:e._id),children:(0,m.jsxs)("div",{className:"row",children:[(0,m.jsx)("div",{className:"img_name",children:null===e||void 0===e||null===(s=e.cart)||void 0===s?void 0:s.map((function(e,n){return(0,m.jsxs)("div",{className:"img_name_row",children:[(0,m.jsx)("img",{src:"".concat(_.M,"/").concat(null===e||void 0===e?void 0:e.images[1]),alt:"raj"}),(0,m.jsx)("p",{children:(null===e||void 0===e?void 0:e.name.length)>=25?"".concat(null===e||void 0===e?void 0:e.name.slice(0,25),"..."):null===e||void 0===e?void 0:e.name})]},n)}))}),(0,m.jsx)("div",{className:"price",children:(0,m.jsxs)("p",{children:["\u20b9 ",null===e||void 0===e?void 0:e.totalPrice]})}),(0,m.jsxs)("div",{className:"status",children:[(0,m.jsx)("p",{children:null===e||void 0===e?void 0:e.status}),"Delivered"===(null===e||void 0===e?void 0:e.status)&&(0,m.jsx)("button",{className:"btn-sec",children:"Write a product review"})]})]},n)})}))})})})},A=s(6635),I=s(2926),M=s(1213),F=s(5985),P=s(242),E=s(4459),D=s(4054),U=function(){var e=(0,v.v9)((function(e){return e.user})),n=e.user,s=e.error,r=e.success,t=(0,i.useState)(!1),c=(0,a.Z)(t,2),l=c[0],d=c[1],u=(0,i.useState)(""),x=(0,a.Z)(u,2),h=x[0],j=x[1],p=(0,i.useState)(""),f=(0,a.Z)(p,2),_=f[0],g=f[1],N=(0,i.useState)(""),b=(0,a.Z)(N,2),w=b[0],Z=b[1],S=(0,i.useState)(""),C=(0,a.Z)(S,2),k=C[0],y=C[1],U=(0,i.useState)(""),O=(0,a.Z)(U,2),Y=O[0],z=O[1],R=(0,i.useState)(""),T=(0,a.Z)(R,2),q=T[0],L=T[1],$=(0,i.useState)(""),B=(0,a.Z)($,2),H=B[0],V=B[1],W=(0,v.I0)(),J=[{name:"default"},{name:"home"},{name:"office"}];return(0,i.useEffect)((function(){s&&(F.Am.error(s),W({type:"clearErrors"}))}),[s,W,r]),(0,m.jsxs)(m.Fragment,{children:[l&&(0,m.jsxs)(m.Fragment,{children:[(0,m.jsx)("div",{className:l?"new__address active":"new__address",children:(0,m.jsxs)("div",{className:"new__address__main",children:[(0,m.jsx)("div",{className:"hide__address__popup",children:(0,m.jsx)(M.ySC,{className:"icon",onClick:function(){return d(!1)}})}),(0,m.jsx)("div",{className:"heading",children:(0,m.jsx)("h2",{children:"Add New Address"})}),(0,m.jsxs)("form",{action:"",onSubmit:function(e){e.preventDefault(),""===H||""===h||""===w?F.Am.error("please fill all the fields"):(W((0,o.$X)(h,_,w,k,Y,q,H)),d(!1),j(""),g(""),Z(""),y(null),z(""),L(""),V(""),r&&F.Am.success(r))},children:[(0,m.jsxs)("div",{className:"box",children:[(0,m.jsx)("label",{htmlFor:"country",children:"Country"}),(0,m.jsxs)("select",{name:"",id:"country",value:h,onChange:function(e){return j(e.target.value)},children:[(0,m.jsx)("option",{value:"",children:"choose Your country"}),P.Z&&P.Z.getAllCountries().map((function(e,n){return(0,m.jsx)("option",{value:e.isoCode,children:e.name},n)}))]})]}),(0,m.jsxs)("div",{className:"box__row",children:[(0,m.jsxs)("div",{className:"box",children:[(0,m.jsx)("label",{htmlFor:"state",children:"State"}),(0,m.jsxs)("select",{name:"",id:"state",value:_,onChange:function(e){return g(e.target.value)},children:[(0,m.jsx)("option",{value:"",children:"choose Your state"}),E.ZP&&E.ZP.getStatesOfCountry(h).map((function(e,n){return(0,m.jsx)("option",{value:e.isoCode,children:e.name},n)}))]})]}),(0,m.jsxs)("div",{className:"box",children:[(0,m.jsx)("label",{htmlFor:"city",children:"City"}),(0,m.jsxs)("select",{name:"",id:"city",value:w,onChange:function(e){return Z(e.target.value)},children:[(0,m.jsx)("option",{value:"",children:"choose Your city"}),D.Z&&D.Z.getCitiesOfState(h,_).map((function(e,n){return(0,m.jsx)("option",{value:e.isoCode,children:e.name},n)}))]})]})]}),(0,m.jsxs)("div",{className:"box",children:[(0,m.jsx)("label",{htmlFor:"address1",children:"Apartment, suit, etc. (optional)"}),(0,m.jsx)("input",{type:"address",id:"address1",required:!0,value:Y,placeholder:"Apartment, suit, etc. (optional)",onChange:function(e){return z(e.target.value)}})]}),(0,m.jsxs)("div",{className:"box",children:[(0,m.jsx)("label",{htmlFor:"address2",children:"Address"}),(0,m.jsx)("input",{type:"address",id:"address2",required:!0,placeholder:"Address",value:q,onChange:function(e){return L(e.target.value)}})]}),(0,m.jsxs)("div",{className:"box",children:[(0,m.jsx)("label",{htmlFor:"zipcode",children:"Zip Code"}),(0,m.jsx)("input",{type:"number",id:"zipcode",required:!0,value:k,onChange:function(e){return y(e.target.value)}})]}),(0,m.jsxs)("div",{className:"box",children:[(0,m.jsx)("label",{htmlFor:"country",children:"Address Type"}),(0,m.jsxs)("select",{name:"",id:"country",value:H,onChange:function(e){return V(e.target.value)},children:[(0,m.jsx)("option",{value:"",children:"Choose Your Address Type"}),J&&J.map((function(e,n){return(0,m.jsx)("option",{value:e.name,children:e.name},n)}))]})]}),(0,m.jsx)("div",{className:"box",children:(0,m.jsx)("button",{type:"submit",className:"btn-main",children:"Submit"})})]})]})}),(0,m.jsx)("p",{onClick:function(){return d(!1)},className:l?"overlay":""})]}),(0,m.jsxs)("div",{className:"address__main",children:[(0,m.jsxs)("div",{className:"header",children:[(0,m.jsx)("div",{className:"container__heading",children:(0,m.jsx)("h2",{children:"Address"})}),(0,m.jsx)("button",{onClick:function(){return d(!0)},className:"btn-main",children:"ADD NEW"})]}),n&&n.addresses.map((function(e,s){return(0,m.jsxs)("div",{className:"card__row",children:[(0,m.jsx)("div",{className:"card__box",children:(0,m.jsx)("h4",{children:null===e||void 0===e?void 0:e.addressType})}),(0,m.jsx)("div",{className:"card__box",children:(0,m.jsx)("p",{children:null===n||void 0===n?void 0:n.name})}),(0,m.jsx)("div",{className:"card__box",children:(0,m.jsxs)("p",{children:[null===e||void 0===e?void 0:e.address1," ",null===e||void 0===e?void 0:e.address2,", ",null===e||void 0===e?void 0:e.zipCode]})}),(0,m.jsx)("div",{className:"card__box",children:(0,m.jsx)("p",{children:null===n||void 0===n?void 0:n.phoneNumber})}),(0,m.jsx)("div",{className:"card__box",children:(0,m.jsx)("p",{className:"delete__icon",onClick:function(){return function(e){W((0,o.Oe)(e._id)),r&&F.Am.success(r)}(e)},children:(0,m.jsx)(A.gu,{icon:I.gtu})})})]},s)})),n&&0===n.addresses.length&&(0,m.jsx)("div",{className:"empty__address",children:(0,m.jsx)("h4",{children:"You not have any saved address!"})})]})]})},O=function(){var e=(0,i.useState)(""),n=(0,a.Z)(e,2),s=n[0],r=n[1],t=(0,i.useState)(""),c=(0,a.Z)(t,2),l=c[0],d=c[1],o=(0,i.useState)(""),u=(0,a.Z)(o,2),v=u[0],x=u[1],j=(0,i.useState)(!1),_=(0,a.Z)(j,2),N=_[0],b=_[1],w=(0,i.useState)(!1),Z=(0,a.Z)(w,2),S=Z[0],C=Z[1],k=(0,i.useState)(!1),y=(0,a.Z)(k,2),A=y[0],I=y[1],M=function(){var e=(0,f.Z)((0,p.Z)().mark((function e(n){return(0,p.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n.preventDefault(),""===s&&""===l&&""===v){e.next=10;break}if(l!==v){e.next=7;break}return e.next=5,g.Z.put("/api/v2/update-user-password",{oldPassword:s,newPassword:l},{withCredentials:!0}).then((function(e){F.Am.success(e.data.message),r(""),d(""),x("")})).catch((function(e){F.Am.error(e.response.data.error.message)}));case 5:e.next=8;break;case 7:F.Am.error("password not match!");case 8:e.next=11;break;case 10:F.Am.error("please fill all the fields!");case 11:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}();return(0,m.jsxs)("div",{className:"password__main",children:[(0,m.jsx)("div",{className:"header",children:(0,m.jsx)("div",{className:"container__heading",children:(0,m.jsx)("h2",{children:"Change Password"})})}),(0,m.jsx)("div",{className:"input__row",children:(0,m.jsxs)("form",{onSubmit:M,children:[(0,m.jsxs)("div",{className:"box",children:[(0,m.jsx)("label",{htmlFor:"oldpassword",children:"Enter Your Old Password"}),(0,m.jsx)("input",{type:N?"text":"password",value:s,onChange:function(e){return r(e.target.value)}}),(0,m.jsx)("span",{children:N?(0,m.jsx)(h.I0d,{onClick:function(){return b(!1)}}):(0,m.jsx)(h.Zju,{onClick:function(){return b(!0)}})})]}),(0,m.jsxs)("div",{className:"box",children:[(0,m.jsx)("label",{htmlFor:"newPassword",children:"New Password"}),(0,m.jsx)("input",{type:S?"text":"password",value:l,onChange:function(e){return d(e.target.value)}}),(0,m.jsx)("span",{children:S?(0,m.jsx)(h.I0d,{onClick:function(){return C(!1)}}):(0,m.jsx)(h.Zju,{onClick:function(){return C(!0)}})})]}),(0,m.jsxs)("div",{className:"box",children:[(0,m.jsx)("label",{htmlFor:"confirmNewPassword",children:"Confirm New Password"}),(0,m.jsx)("input",{type:A?"text":"password",value:v,onChange:function(e){return x(e.target.value)}}),(0,m.jsx)("span",{children:A?(0,m.jsx)(h.I0d,{onClick:function(){return I(!1)}}):(0,m.jsx)(h.Zju,{onClick:function(){return I(!0)}})})]}),(0,m.jsx)("div",{className:"box",children:(0,m.jsx)("button",{type:"submit",className:"btn-main",children:"Update"})})]})})]})},Y=s(3433),z=s(1608),R=s(860),T=s(4651),q=(0,z.ZP)("http://localhost:4000/",{transports:["websocket"]}),L=function(e){var n=e.data,s=e.index,r=e.setOpen,t=e.setCurrentChat,c=e.me,l=e.userData,d=e.setUserData,o=e.online,v=e.activeStatus,x=e.setActiveStatus,h=(0,i.useState)(0),j=(0,a.Z)(h,2),N=(j[0],j[1]),b=(0,i.useState)([]),w=(0,a.Z)(b,2),Z=w[0],S=w[1],C=(0,u.s0)();return(0,i.useEffect)((function(){x(o);var e=n.members.find((function(e){return e!==c})),s=function(){var n=(0,f.Z)((0,p.Z)().mark((function n(){var s,a;return(0,p.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,g.Z.get("/api/v2/get-shop-info/".concat(e));case 3:s=n.sent,a=s.data,S(a.shop),n.next=11;break;case 8:n.prev=8,n.t0=n.catch(0),console.log(n.t0);case 11:case"end":return n.stop()}}),n,null,[[0,8]])})));return function(){return n.apply(this,arguments)}}();s()}),[c,n,o,x]),(0,m.jsx)("div",{className:"message__box",onClick:function(){return N(s)||(e=n._id,C("?".concat(e)),void r(!0))||t(n)||d(Z)||x(o);var e},children:(0,m.jsxs)("div",{className:"".concat("message__row"),children:[(0,m.jsxs)("div",{className:"imgBox",children:[(0,m.jsx)("img",{src:"".concat(_.M,"/").concat(null===Z||void 0===Z?void 0:Z.avatar),alt:null===Z||void 0===Z?void 0:Z.avatar}),v&&(0,m.jsx)("div",{className:"active"})]}),(0,m.jsxs)("div",{className:"name__message",children:[(0,m.jsx)("p",{children:null===Z||void 0===Z?void 0:Z.name}),(0,m.jsxs)("span",{children:[(null===n||void 0===n?void 0:n.lastMessageId)!==(null===l||void 0===l?void 0:l._id)?"You:":(null===l||void 0===l?void 0:l.name.split(" ")[0])+": "," ",null===n||void 0===n?void 0:n.lastMessage]})]})]})})},$=function(e){var n=e.setOpen,s=e.newMessage,a=e.setNewMessage,i=e.sendMessageHandler,t=e.messages,c=e.sellerId,l=e.userData,d=e.activeStatus,o=e.scrollRef,u=e.handleImageUpload,v=e.images;return(0,m.jsx)("div",{className:"seller__inbox__main",children:(0,m.jsxs)("div",{className:"seller__inbox__column",children:[(0,m.jsxs)("div",{className:"seller__row",children:[(0,m.jsxs)("div",{className:"imgBox",children:[(0,m.jsx)("img",{src:"".concat(_.M,"/").concat(null===l||void 0===l?void 0:l.avatar),alt:"raj"}),d&&(0,m.jsx)("div",{className:"active"})]}),(0,m.jsxs)("div",{className:"name__message",children:[(0,m.jsx)("p",{children:null===l||void 0===l?void 0:l.name}),(0,m.jsx)("span",{children:d?"Active Now":""})]}),(0,m.jsx)("div",{className:"back__icon",children:(0,m.jsx)(r.TPM,{onClick:function(){return n(!1)}})})]}),(0,m.jsx)("div",{className:"messages__box",children:t&&t.map((function(e,n){return(0,m.jsxs)("div",{className:"".concat(e.sender===c?"message__row row__2":"message__row"),ref:o,children:[(0,m.jsx)("div",{className:"message__content",children:e.images?(0,m.jsx)("img",{src:"".concat(_.M,"/").concat(e.images),alt:v+"raj"}):(0,m.jsx)("p",{children:e.text})}),(0,m.jsx)("div",{className:"time__ago"})]},n)}))}),(0,m.jsx)("div",{className:"send__messages",children:(0,m.jsxs)("form",{onSubmit:i,children:[(0,m.jsxs)("div",{className:"input__box side__input",children:[(0,m.jsx)("label",{htmlFor:"files",children:(0,m.jsx)(R.jRL,{size:23})}),(0,m.jsx)("input",{type:"file",id:"files",onChange:u})]}),(0,m.jsx)("div",{className:"input__box center__input",children:(0,m.jsx)("input",{type:"text",placeholder:"type message here...",value:s,onChange:function(e){return a(e.target.value)}})}),(0,m.jsxs)("div",{className:"input__box side__input",children:[(0,m.jsx)("label",{htmlFor:"sends",children:(0,m.jsx)(T.NQj,{size:25})}),(0,m.jsx)("input",{type:"submit",id:"sends"})]})]})})]})})},B=function(){var e=(0,v.v9)((function(e){return e.user})),n=e.user,s=e.loading,r=(0,i.useState)([]),t=(0,a.Z)(r,2),c=t[0],l=t[1],d=(0,i.useState)(null),o=(0,a.Z)(d,2),u=o[0],x=o[1],h=(0,i.useState)(),j=(0,a.Z)(h,2),_=j[0],N=j[1],b=(0,i.useState)([]),w=(0,a.Z)(b,2),Z=w[0],S=w[1],C=(0,i.useState)(""),k=(0,a.Z)(C,2),y=k[0],A=k[1],I=(0,i.useState)(null),M=(0,a.Z)(I,2),F=M[0],P=M[1],E=(0,i.useState)([]),D=(0,a.Z)(E,2),U=D[0],O=D[1],z=(0,i.useState)(),R=(0,a.Z)(z,2),T=R[0],B=R[1],H=(0,i.useState)(!1),V=(0,a.Z)(H,2),W=V[0],J=V[1],Q=(0,i.useState)(!1),X=(0,a.Z)(Q,2),G=X[0],K=X[1],ee=(0,i.useRef)(null);(0,i.useEffect)((function(){q.on("getMessage",(function(e){x({sender:e.senderId,text:e.text,createdAt:Date.now()})}))}),[]),(0,i.useEffect)((function(){u&&(null===_||void 0===_?void 0:_.members.includes(u.sender))&&S((function(e){return[].concat((0,Y.Z)(e),[u])}))}),[u,_]),(0,i.useEffect)((function(){var e=function(){var e=(0,f.Z)((0,p.Z)().mark((function e(){var s;return(0,p.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,g.Z.get("/api/v2/get-all-conversation-user/".concat(null===n||void 0===n?void 0:n._id),{withCredentials:!0});case 3:s=e.sent,l(s.data.conversation),e.next=9;break;case 7:e.prev=7,e.t0=e.catch(0);case 9:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(){return e.apply(this,arguments)}}();e()}),[n,Z]),(0,i.useEffect)((function(){if(n){var e=null===n||void 0===n?void 0:n._id;q.emit("addUser",e),q.on("getUsers",(function(e){O(e)}))}}),[n]);var ne=function(e){var s=e.members.find((function(e){return e!==(null===n||void 0===n?void 0:n._id)})),a=U.find((function(e){return e.userId===s}));return!!a};(0,i.useEffect)((function(){var e=function(){var e=(0,f.Z)((0,p.Z)().mark((function e(){var n;return(0,p.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,g.Z.get("/api/v2/get-all-messages/".concat(null===_||void 0===_?void 0:_._id));case 3:n=e.sent,S(n.data.messages),e.next=9;break;case 7:e.prev=7,e.t0=e.catch(0);case 9:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(){return e.apply(this,arguments)}}();e()}),[_]);var se=function(){var e=(0,f.Z)((0,p.Z)().mark((function e(s){var a,i,r;return(0,p.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(s.preventDefault(),i={sender:null===n||void 0===n?void 0:n._id,text:y,conversationId:null===_||void 0===_?void 0:_._id},r=null===_||void 0===_||null===(a=_.members)||void 0===a?void 0:a.find((function(e){return e!==(null===n||void 0===n?void 0:n._id)})),q.emit("sendMessage",{senderId:null===n||void 0===n?void 0:n._id,receiverId:r,text:y}),e.prev=4,""===!y){e.next=8;break}return e.next=8,g.Z.post("/api/v2/create-new-message",i).then((function(e){S([].concat((0,Y.Z)(Z),[e.data.message])),ae()})).catch((function(e){}));case 8:e.next=12;break;case 10:e.prev=10,e.t0=e.catch(4);case 12:case"end":return e.stop()}}),e,null,[[4,10]])})));return function(n){return e.apply(this,arguments)}}(),ae=function(){var e=(0,f.Z)((0,p.Z)().mark((function e(){return(0,p.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return q.emit("updateLastMessage",{lastMessage:y,lastMessageId:null===n||void 0===n?void 0:n._id}),e.next=3,g.Z.put("/api/v2/update-last-message/".concat(null===_||void 0===_?void 0:_._id),{lastMessage:y,lastMessageId:null===n||void 0===n?void 0:n._id}).then((function(e){A("")})).catch((function(e){}));case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),ie=function(){var e=(0,f.Z)((0,p.Z)().mark((function e(n){var s;return(0,p.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:s=n.target.files[0],B(s),re(s);case 3:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),re=function(){var e=(0,f.Z)((0,p.Z)().mark((function e(s){var a,i,r,t;return(0,p.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(a=new FormData).append("images",s),a.append("sender",null===n||void 0===n?void 0:n._id),a.append("text",y),a.append("conversationId",null===_||void 0===_?void 0:_._id),i=_.members.find((function(e){return e!==n._id})),q.emit("sendMessage",{senderId:n._id,receiverId:i,images:s}),e.prev=7,e.next=10,g.Z.post("/api/v2/create-new-message",a).then((function(e){B(),S([].concat((0,Y.Z)(Z),[e.data.message])),te()})).catch((function(e){console.log(e)}));case 10:e.next=15;break;case 12:e.prev=12,e.t0=e.catch(7),console.log(null===e.t0||void 0===e.t0||null===(r=e.t0.response)||void 0===r||null===(t=r.data)||void 0===t?void 0:t.error);case 15:case"end":return e.stop()}}),e,null,[[7,12]])})));return function(n){return e.apply(this,arguments)}}(),te=function(){var e=(0,f.Z)((0,p.Z)().mark((function e(){return(0,p.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,g.Z.put("/api/v2/update-last-message/".concat(_._id),{lastMessage:"Photo",lastMessageId:null===n||void 0===n?void 0:n._id});case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return(0,i.useEffect)((function(){var e;null===(e=ee.current)||void 0===e||e.scrollIntoView({beahaviour:"smooth"})}),[Z]),(0,m.jsx)("div",{className:"user__inbox__container",children:(0,m.jsx)("div",{className:"container",children:(0,m.jsxs)("div",{className:"inbox__main",children:[!G&&(0,m.jsxs)("div",{className:"message__container",children:[(0,m.jsx)("div",{className:"heading",children:(0,m.jsx)("h2",{children:"All Messages"})}),c&&c.map((function(e,a){return(0,m.jsx)(L,{data:e,index:a,setOpen:K,setCurrentChat:N,me:null===n||void 0===n?void 0:n._id,setUserData:P,userData:F,online:ne(e),activeStatus:W,setActiveStatus:J,loading:s},a)}))]}),G&&(0,m.jsx)($,{setOpen:K,newMessage:y,setNewMessage:A,sendMessageHandler:se,messages:Z,sellerId:n._id,userData:F,activeStatus:W,scrollRef:ee,handleImageUpload:ie,images:T})]})})})},H=function(e){var n=e.active;return(0,m.jsxs)(m.Fragment,{children:[1===n&&(0,m.jsx)("div",{className:"box__container",children:(0,m.jsx)(w,{})}),2===n&&(0,m.jsx)("div",{className:"box__container",children:(0,m.jsx)(C,{})}),3===n&&(0,m.jsx)("div",{className:"box__container",children:(0,m.jsx)(k,{})}),4===n&&(0,m.jsx)("div",{className:"box__container",children:(0,m.jsx)(B,{})}),5===n&&(0,m.jsx)("div",{className:"box__container",children:(0,m.jsx)(y,{})}),6===n&&(0,m.jsx)("div",{className:"box__container",children:(0,m.jsx)(O,{})}),7===n&&(0,m.jsx)("div",{className:"box__container",children:(0,m.jsx)(U,{})}),8===n&&(0,m.jsx)("div",{className:"box__container",children:(0,m.jsx)("h2",{children:"Logout Success"})})]})},V=function(){var e=(0,i.useState)(1),n=(0,a.Z)(e,2),s=n[0],r=n[1];return(0,m.jsx)("div",{className:"profile__container",children:(0,m.jsx)("div",{className:"container",children:(0,m.jsxs)("div",{className:"profile__row",children:[(0,m.jsx)("div",{className:"col__2 profile__sidebar",children:(0,m.jsx)(j,{active:s,setActive:r})}),(0,m.jsx)("div",{className:"col__2 profile__content",children:(0,m.jsx)(H,{active:s})})]})})})}}}]);
//# sourceMappingURL=4670.37f72ca0.chunk.js.map